<div id="tableCreateApp" class="container py-4">
  <div class="card shadow-sm">
    <div class="card-body">
      <h2 class="h4 mb-4">Create New Table</h2>
      
      <form id="tableCreateForm" @submit.prevent="onSubmit">
        <!-- Schema and Table Name -->
        <div class="row mb-4">
          <div class="col-md-4 mb-3 mb-md-0">
            <label class="form-label">Schema (optional)</label>
            <input 
              name="schema" 
              v-model="schema" 
              class="form-control" 
              placeholder="public | dbname | dbo"
            >
          </div>
          <div class="col-md-8">
            <label class="form-label">Table Name <span class="text-danger">*</span></label>
            <input 
              name="table" 
              v-model="table" 
              class="form-control" 
              required
              placeholder="Enter table name"
            >
          </div>
        </div>

        <!-- Columns Section -->
        <div class="mb-4">
          <div class="d-flex justify-content-between align-items-center mb-3">
            <h5 class="mb-0">Columns</h5>
            <button 
              type="button" 
              class="btn btn-sm btn-outline-primary" 
              @click="addColumn"
            >
              <i class="bi bi-plus-lg me-1"></i> Add Column
            </button>
          </div>
          
          <div id="cols" class="mb-3">
            <!-- Column Rows -->
            <div 
              v-for="(c, idx) in columns" 
              :key="idx" 
              class="row g-2 align-items-end mb-3"
            >
              <div class="col-md-3">
                <label class="form-label small mb-1">Name</label>
                <input 
                  name="col_name[]" 
                  v-model="c.name" 
                  class="form-control form-control-sm" 
                  placeholder="column_name" 
                  required
                >
              </div>
              <div class="col-md-3">
                <label class="form-label small mb-1">Type</label>
                <input 
                  name="col_type[]" 
                  v-model="c.type" 
                  class="form-control form-control-sm" 
                  placeholder="varchar, int, etc." 
                  required
                >
              </div>
              <div class="col-md-2">
                <label class="form-label small mb-1">Length</label>
                <input 
                  name="col_length[]" 
                  v-model="c.length" 
                  class="form-control form-control-sm" 
                  placeholder="255"
                >
              </div>
              <div class="col-md-2">
                <div class="form-check">
                  <input 
                    type="checkbox" 
                    name="col_nullable[]" 
                    :value="idx+1" 
                    v-model="c.nullable" 
                    class="form-check-input"
                    :id="'nullable-'+idx"
                  >
                  <label class="form-check-label small" :for="'nullable-'+idx">
                    NULL
                  </label>
                </div>
                <div class="form-check">
                  <input 
                    type="checkbox" 
                    name="col_pk[]" 
                    :value="idx+1" 
                    v-model="c.pk" 
                    class="form-check-input"
                    :id="'pk-'+idx"
                  >
                  <label class="form-check-label small" :for="'pk-'+idx">
                    Primary Key
                  </label>
                </div>
              </div>
              <div class="col-md-1">
                <div class="form-check">
                  <input 
                    type="checkbox" 
                    name="col_ai[]" 
                    :value="idx+1" 
                    v-model="c.ai" 
                    class="form-check-input"
                    :id="'ai-'+idx"
                  >
                  <label class="form-check-label small" :for="'ai-'+idx">
                    Auto Inc
                  </label>
                </div>
              </div>
              <div class="col-md-1 text-end">
                <button 
                  type="button" 
                  class="btn btn-sm btn-outline-danger" 
                  @click="removeColumn(idx)"
                  title="Remove column"
                >
                  <i class="bi bi-trash"></i>
                </button>
              </div>
            </div>
          </div>
        </div>

        <!-- Form Actions -->
        <div class="d-flex justify-content-end gap-2 pt-3 border-top">
          <button 
            type="button" 
            class="btn btn-outline-secondary"
            @click="$router.go(-1)"
          >
            Cancel
          </button>
          <button 
            type="submit" 
            class="btn btn-primary"
            :disabled="!table || columns.length === 0"
          >
            <i class="bi bi-save me-1"></i> Create Table
          </button>
        </div>
      </form>
    </div>
  </div>
</div>
